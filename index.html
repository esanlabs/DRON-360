<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>DJI 360 VR - Modo Gatillo</title>
    <script src="https://aframe.io/releases/1.4.0/aframe.min.js"></script>
</head>
<body>

    <a-scene>
        <a-assets>
            <img id="img1" src="DJI_0218.JPG">
            <img id="img2" src="DJI_0219.JPG">
            <img id="img3" src="DJI_0220.JPG">
        </a-assets>

        <a-sky id="visor" src="#img1" rotation="0 -90 0"></a-sky>

        <a-entity camera look-controls>
            <a-cursor 
                id="cursor-visual"
                fuse="false"
                raycaster="objects: .navegable"
                color="#FF0000">
            </a-cursor>
        </a-entity>

        <a-entity laser-controls="hand: right"></a-entity>
        <a-entity laser-controls="hand: left"></a-entity>
    </a-scene>

    <script>
        const fotos = ['#img1', '#img2', '#img3'];
        let indice = 0;
        const visor = document.querySelector('#visor');

        function cambiarFoto() {
            // Lógica de bucle: (0+1)%3 = 1, (1+1)%3 = 2, (2+1)%3 = 0
            indice = (indice + 1) % fotos.length;
            visor.setAttribute('src', fotos[indice]);
            console.log("Cambiado a: " + fotos[indice]);
        }

        // Escuchar el clic general (pantalla táctil o ratón)
        window.addEventListener('click', cambiarFoto);

        // Escuchar el botón "trigger" (gatillo) de los controles VR
        window.addEventListener('keydown', (e) => {
            // Espacio o Enter también funcionan como gatillo en muchos visores
            if (e.code === 'Space' || e.code === 'Enter') {
                cambiarFoto();
            }
        });

        // Evento específico para mandos de VR (Gatillo/Trigger)
        document.querySelector('a-scene').addEventListener('enter-vr', function () {
            // Cuando entras en VR, escuchamos el botón de los mandos
            document.querySelectorAll('[laser-controls]').forEach(control => {
                control.addEventListener('triggerdown', cambiarFoto);
            });
        });
    </script>
</body>
</html>
